/*
* ReisenJS
* Mit License
* https://github.com/nakasyou/ReisenJS
*/
var reisen=(()=>{var u=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var y=(o,t)=>{for(var s in t)u(o,s,{get:t[s],enumerable:!0})},v=(o,t,s,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of _(t))!x.call(o,e)&&e!==s&&u(o,e,{get:()=>t[e],enumerable:!(i=p(t,e))||i.enumerable});return o};var m=o=>v(u({},"__esModule",{value:!0}),o);var g={};y(g,{default:()=>l});var h=class{constructor(t){t&&(this.id=t),this.down=!0,Object.defineProperty(this,"_x",{value:0,writable:!0}),Object.defineProperty(this,"_y",{value:0,writable:!0}),Object.defineProperty(this,"_delta",{value:{x:0,y:0}}),Object.defineProperty(this,"_last",{value:{x:0,y:0,time:new Date().getTime()}})}_deltaCalc(){let t=new Date().getTime(),s=t-this._last.time;s!==0&&(this._delta.x=(this.x-this._last.x)/s,this._delta.y=(this.y-this._last.y)/s,this._last.x=this.x,this._last.y=this.y,this._last.time=t)}get delta(){return this._deltaCalc(),this._delta}setXY(t,s){t&&(this._x=t),s&&(this._y=s),this._deltaCalc()}set x(t){this.setXY(t)}get x(){return this._x}set y(t){this.setXY(null,t)}get y(){return this._y}};var a=class extends h{constructor(){super("mouse"),this.down=!1}_down(){this.down=!0}_up(){this.down=!1}};var d=class extends Array{constructor(){super(),this.mouse=new a}get pointers(){return this.concat(this.mouse)}start(t){if(!this.includes(t))this.push(t);else throw new TypeError("already contains the element")}end(t){let s=0;for(let i of this){if(i.id===t){this.splice(s,1);break}s++}}cancel(){this.splice(1)}move(t,s,i){let e=this.search(t);e!==-1&&(this[e].x=s,this[e].y=i)}search(t){let s=0;for(let i of this){if(i.id===t)return s;s++}return-1}};var l=class{constructor(t,s={}){let i={};Object.keys(i).forEach(e=>{Object.keys(s).includes(e)||(s[e]=i[e])}),Object.defineProperty(this,"_pointers",{value:new d,writable:!1,enumerable:!1}),Object.defineProperty(this,"_events",{value:{}}),this.element=t,t.addEventListener("touchstart",e=>{let n=t.getBoundingClientRect();Object.values(e.changedTouches).forEach(r=>{let c=new h(r.identifier);c.x=r.clientX-n.x,c.y=r.clientY-n.y,c.id=r.identifier,this._pointers.start(c)})}),t.addEventListener("touchend",e=>{Object.values(e.changedTouches).forEach(n=>{this._pointers.end(n.identifier)})}),t.addEventListener("touchcancel",e=>{this._pointers.cancel()}),t.addEventListener("touchmove",e=>{let n=t.getBoundingClientRect();Object.values(e.changedTouches).forEach(r=>{let c=r.clientX-n.x,f=r.clientY-n.y;this._pointers.move(r.identifier,c,f)})}),t.addEventListener("mousedown",e=>{this._pointers.mouse._down();let n=t.getBoundingClientRect(),r=e.clientX-n.x,c=e.clientY-n.y;this._pointers.mouse.x=r,this._pointers.mouse.y=c}),t.addEventListener("mouseup",e=>{this._pointers.mouse._up()}),t.addEventListener("mousemove",e=>{let n=t.getBoundingClientRect(),r=e.clientX-n.x,c=e.clientY-n.y;this._pointers.mouse.x=r,this._pointers.mouse.y=c})}get pointers(){return this._pointers.pointers}get pointer(){return this._pointers.pointers.at(0)}addEvent(t,s){this._events[t]||(this._events[t]=[]),this._events[t].push(s)}clearEvent(t){this._events[t]=[]}callEvent(t,...s){this._events[t]&&this._events[t].forEach(i=>{i(...s)})}};return m(g);})();
//# sourceMappingURL=reisen.usm.js.map
