/*
* ReisenJS
* Mit License
* https://github.com/nakasyou/ReisenJS
*/
var c=class{constructor(t){t&&(this.id=t),this.down=!0,Object.defineProperty(this,"_x",{value:0,writable:!0}),Object.defineProperty(this,"_y",{value:0,writable:!0}),Object.defineProperty(this,"_delta",{value:{x:0,y:0}}),Object.defineProperty(this,"_last",{value:{x:0,y:0,time:new Date().getTime()}})}_deltaCalc(){let t=new Date().getTime(),e=t-this._last.time;e!==0&&(this._delta.x=(this.x-this._last.x)/e,this._delta.y=(this.y-this._last.y)/e,this._last.x=this.x,this._last.y=this.y,this._last.time=t)}get delta(){return this._deltaCalc(),this._delta}setXY(t,e){t&&(this._x=t),e&&(this._y=e),this._deltaCalc()}set x(t){this.setXY(t)}get x(){return this._x}set y(t){this.setXY(null,t)}get y(){return this._y}};var h=class extends c{constructor(){super("mouse"),this.down=!1}_down(){this.down=!0}_up(){this.down=!1}};var a=class extends Array{constructor(){super(),this.mouse=new h}get pointers(){return this.concat(this.mouse)}start(t){if(!this.includes(t))this.push(t);else throw new TypeError("already contains the element")}end(t){let e=0;for(let r of this){if(r.id===t){this.splice(e,1);break}e++}}cancel(){this.splice(1)}move(t,e,r){let s=this.search(t);s!==-1&&(this[s].x=e,this[s].y=r)}search(t){let e=0;for(let r of this){if(r.id===t)return e;e++}return-1}};var l=class{constructor(t,e={}){let r={};Object.keys(r).forEach(s=>{Object.keys(e).includes(s)||(e[s]=r[s])}),Object.defineProperty(this,"_pointers",{value:new a,writable:!1,enumerable:!1}),Object.defineProperty(this,"_events",{value:{}}),this.element=t,t.addEventListener("touchstart",s=>{let i=t.getBoundingClientRect();Object.values(s.changedTouches).forEach(n=>{let o=new c(n.identifier);o.x=n.clientX-i.x,o.y=n.clientY-i.y,o.id=n.identifier,this._pointers.start(o)})}),t.addEventListener("touchend",s=>{Object.values(s.changedTouches).forEach(i=>{this._pointers.end(i.identifier)})}),t.addEventListener("touchcancel",s=>{this._pointers.cancel()}),t.addEventListener("touchmove",s=>{let i=t.getBoundingClientRect();Object.values(s.changedTouches).forEach(n=>{let o=n.clientX-i.x,u=n.clientY-i.y;this._pointers.move(n.identifier,o,u)})}),t.addEventListener("mousedown",s=>{this._pointers.mouse._down();let i=t.getBoundingClientRect(),n=s.clientX-i.x,o=s.clientY-i.y;this._pointers.mouse.x=n,this._pointers.mouse.y=o}),t.addEventListener("mouseup",s=>{this._pointers.mouse._up()}),t.addEventListener("mousemove",s=>{let i=t.getBoundingClientRect(),n=s.clientX-i.x,o=s.clientY-i.y;this._pointers.mouse.x=n,this._pointers.mouse.y=o})}get pointers(){return this._pointers.pointers}get pointer(){return this._pointers.pointers.at(0)}addEvent(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)}clearEvent(t){this._events[t]=[]}callEvent(t,...e){this._events[t]&&this._events[t].forEach(r=>{r(...e)})}};export{l as default};
//# sourceMappingURL=reisen.mjs.map
